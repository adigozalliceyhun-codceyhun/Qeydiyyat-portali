html_code = '''<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Qeydiyyat Portalı</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: #0a0a0a !important;
      color: #e5e7eb;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      margin: 0;
      padding: 0;
    }

    @media (max-width: 640px) {
      body {
        font-size: 14px;
      }
    }

    .glass {
      background: #1a1a1a;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.08);
    }

    .input-field {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid #333;
      border-radius: 12px;
      font-size: 16px;
      background: #1a1a1a;
      color: #e5e7eb;
      transition: all 0.2s;
      margin-top: 6px;
    }

    .input-field:focus {
      border-color: #8b5cf6;
      outline: none;
      box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
    }

    .input-field::placeholder {
      color: #6b7280;
    }

    .gradient-header {
      background: linear-gradient(135deg, #9333ea 0%, #db2777 100%);
      color: white;
      padding: 20px;
      border-radius: 16px;
      margin-bottom: 20px;
      text-align: center;
    }

    .tabs {
      display: flex;
      justify-content: space-around;
      background: #1a1a1a;
      padding: 12px;
      border-radius: 50px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.05);
    }

    .tab {
      padding: 8px 16px;
      border-radius: 25px;
      font-size: 13px;
      font-weight: 500;
      color: #9ca3af;
      transition: all 0.2s;
      border: none;
      background: transparent;
    }

    .tab.active {
      background: linear-gradient(135deg, #9333ea 0%, #db2777 100%);
      color: white;
    }

    .user-card {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 24px 20px;
      margin-bottom: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.3);
      text-align: center;
      position: relative;
      animation: slideUp 0.4s ease;
      border: 1px solid rgba(255,255,255,0.05);
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .new-badge {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #9333ea, #db2777);
      color: white;
      padding: 4px 14px;
      border-radius: 20px;
      font-size: 10px;
      font-weight: bold;
      text-transform: uppercase;
    }

    .avatar-circle {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 16px;
      font-size: 36px;
      font-weight: bold;
      color: white;
      position: relative;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }

    .status-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(59, 130, 246, 0.15);
      color: #60a5fa;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    .instagram-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.2) 0%, rgba(219, 39, 119, 0.2) 100%);
      color: #c084fc;
      padding: 10px 24px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 500;
      font-size: 14px;
      margin-top: 12px;
      border: 1px solid rgba(139, 92, 246, 0.3);
      transition: all 0.2s;
    }

    .instagram-btn:hover {
      background: linear-gradient(135deg, rgba(139, 92, 246, 0.3) 0%, rgba(219, 39, 119, 0.3) 100%);
    }

    .time-ago {
      color: #6b7280;
      font-size: 12px;
      margin-top: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
    }

    .register-btn {
      width: 100%;
      background: linear-gradient(135deg, #9333ea 0%, #db2777 100%);
      color: white;
      border: none;
      padding: 16px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      margin-top: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: opacity 0.2s;
    }

    .register-btn:hover {
      opacity: 0.9;
    }

    .radio-group {
      display: flex;
      gap: 12px;
      margin-top: 8px;
    }

    .radio-label {
      flex: 1;
      text-align: center;
      padding: 12px;
      border: 2px solid #333;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      color: #9ca3af;
      background: #1a1a1a;
    }

    .radio-label.active {
      border-color: #9333ea;
      background: rgba(139, 92, 246, 0.2);
      color: #c084fc;
    }

    input[type="radio"] {
      display: none;
    }

    .login-screen {
      position: fixed;
      inset: 0;
      background: #0a0a0a;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    .login-card {
      background: #1a1a1a;
      padding: 32px 24px;
      border-radius: 24px;
      width: 100%;
      max-width: 360px;
      box-shadow: 0 4px 24px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.05);
    }

    .hidden {
      display: none !important;
    }

    .container {
      max-width: 480px;
      margin: 0 auto;
      padding: 16px;
      padding-bottom: 100px;
    }

    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #10b981;
      color: white;
      padding: 14px 28px;
      border-radius: 50px;
      font-weight: 500;
      opacity: 0;
      transition: all 0.3s;
      z-index: 1001;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    label {
      color: #9ca3af;
    }

    h2, h3 {
      color: #f3f4f6 !important;
    }

    p {
      color: #9ca3af;
    }

    .stats-number {
      color: #f3f4f6 !important;
    }
  </style>
</head>
<body>

  <!-- Giriş/Qeydiyyat Ekranı -->
  <div id="loginScreen" class="login-screen">
    <div class="login-card">
      <div style="text-align: center; margin-bottom: 24px;">
        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #9333ea, #db2777); border-radius: 20px; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
          <svg width="40" height="40" fill="white" viewBox="0 0 24 24"><path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
        </div>
        <h2 style="margin: 0; font-size: 24px;">Xoş Gəlmisiniz</h2>
        <p style="margin-top: 8px; font-size: 14px;">Davam etmək üçün qeydiyyatdan keçin</p>
      </div>

      <form id="registerForm" onsubmit="handleRegister(event)">
        <div style="margin-bottom: 16px;">
          <label style="font-size: 13px; font-weight: 500;">Ad</label>
          <input type="text" id="firstName" required class="input-field" placeholder="Adınızı daxil edin">
        </div>

        <div style="margin-bottom: 16px;">
          <label style="font-size: 13px; font-weight: 500;">Soyad</label>
          <input type="text" id="lastName" required class="input-field" placeholder="Soyadınızı daxil edin">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
          <div>
            <label style="font-size: 13px; font-weight: 500;">Yaş</label>
            <input type="number" id="age" min="10" max="100" required class="input-field" placeholder="25">
          </div>
          <div>
            <label style="font-size: 13px; font-weight: 500;">Cins</label>
            <select id="gender" required class="input-field" style="appearance: none; background-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2216%22 height=%2216%22 fill=%226b7280%22 viewBox=%220 0 16 16%22><path d=%22M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z%22/></svg>'); background-repeat: no-repeat; background-position: right 12px center; padding-right: 36px;">
              <option value="" disabled selected>Seçin</option>
              <option value="Kişi">Kişi</option>
              <option value="Qadın">Qadın</option>
            </select>
          </div>
        </div>

        <div style="margin-bottom: 16px;">
          <label style="font-size: 13px; font-weight: 500;">Ailə Vəziyyəti</label>
          <div class="radio-group">
            <label class="radio-label active" onclick="selectStatus(this, 'Subay')">
              <input type="radio" name="status" value="Subay" checked>
              Subay
            </label>
            <label class="radio-label" onclick="selectStatus(this, 'Evli')">
              <input type="radio" name="status" value="Evli">
              Evli
            </label>
          </div>
        </div>

        <div style="margin-bottom: 16px;">
          <label style="font-size: 13px; font-weight: 500;">Instagram</label>
          <div style="position: relative;">
            <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: #6b7280; font-size: 16px;">@</span>
            <input type="text" id="instagram" required class="input-field" style="padding-left: 36px;" placeholder="istifadeci_adi">
          </div>
        </div>

        <button type="submit" class="register-btn">
          <span>Qeydiyyatdan Keç</span>
          <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
        </button>
      </form>
    </div>
  </div>

  <!-- Ana Ekran -->
  <div id="mainScreen" class="hidden">
    <div class="container">
      <!-- Başlıq -->
      <div class="gradient-header">
        <h1 style="margin: 0 0 8px 0; font-size: 20px;">İcma ilə Əlaqə Qurun</h1>
        <p style="margin: 0; opacity: 0.9; font-size: 13px;">Yeni insanlarla tanış olun</p>
      </div>

      <!-- Statistika -->
      <div style="display: flex; gap: 16px; margin-bottom: 20px;">
        <div class="glass" style="flex: 1; padding: 16px; text-align: center;">
          <div style="font-size: 24px; font-weight: bold;" class="stats-number" id="totalCount">0</div>
          <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">İstifadəçi</div>
        </div>
        <div class="glass" style="flex: 1; padding: 16px; text-align: center;">
          <div style="font-size: 24px; font-weight: bold;" class="stats-number" id="todayCount">0</div>
          <div style="font-size: 12px; color: #6b7280; margin-top: 4px;">Bu gün</div>
        </div>
      </div>

      <!-- Tablar -->
      <div class="tabs">
        <button class="tab active" onclick="filterUsers('all', this)">Hamısı</button>
        <button class="tab" onclick="filterUsers('Kişi', this)">Kişi</button>
        <button class="tab" onclick="filterUsers('Qadın', this)">Qadın</button>
        <button class="tab" onclick="filterUsers('Subay', this)">Subay</button>
        <button class="tab" onclick="filterUsers('Evli', this)">Evli</button>
      </div>

      <!-- İstifadəçi Grid -->
      <div id="usersList"></div>

      <!-- Boş state -->
      <div id="emptyState" style="text-align: center; padding: 40px; color: #6b7280; display: none;">
        <svg width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto 16px; opacity: 0.5;" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/></svg>
        <p>Hələ heç kim qeydiyyatdan keçməyib</p>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">Qeydiyyat tamamlandı!</div>

  <script>
    const FORM_ACTION_URL = "https://docs.google.com/forms/d/e/1FAIpQLScHbTc16Jsmv5cdnUkxCAH5FxlOi9FiqG0aURzZQqhG4mgI9Q/formResponse";
    const ENTRY_FIRSTNAME = "entry.1178680962";
    const ENTRY_LASTNAME = "entry.1475120277";
    const ENTRY_INSTAGRAM = "entry.1110943076";
    const ENTRY_AGE = "entry.1294895519";
    const ENTRY_GENDER = "entry.1632031862";
    const ENTRY_STATUS = "entry.222463848";

    const LS_KEY = "socialconnect_user_v1";
    const LS_USERS = "socialconnect_users_v1";
    const LS_REGISTERED = "socialconnect_registered_v1";

    let currentUser = null;
    let users = [];
    let currentFilter = 'all';

    function init() {
      const isRegistered = localStorage.getItem(LS_REGISTERED);
      const savedUser = localStorage.getItem(LS_KEY);
      
      if (isRegistered && savedUser) {
        currentUser = JSON.parse(savedUser);
        showMainScreen();
      }
    }

    function selectStatus(el, value) {
      document.querySelectorAll('.radio-label').forEach(l => l.classList.remove('active'));
      el.classList.add('active');
      el.querySelector('input').checked = true;
    }

    function showMainScreen() {
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainScreen').classList.remove('hidden');
      loadUsers();
    }

    function getInitials(firstName, lastName) {
      const f = firstName ? firstName.charAt(0).toUpperCase() : '';
      const l = lastName ? lastName.charAt(0).toUpperCase() : '';
      return f + l;
    }

    function timeAgo(timestamp) {
      if (!timestamp) return "İndi";
      const seconds = Math.floor((Date.now() - timestamp) / 1000);
      if (seconds < 60) return "İndi";
      const minutes = Math.floor(seconds / 60);
      if (minutes < 60) return `${minutes} dəq əvvəl`;
      const hours = Math.floor(minutes / 60);
      if (hours < 24) return `${hours} saat əvvəl`;
      return `${Math.floor(hours / 24)} gün əvvəl`;
    }

    async function handleRegister(e) {
      e.preventDefault();

      const firstName = document.getElementById('firstName').value.trim();
      const lastName = document.getElementById('lastName').value.trim();
      const age = document.getElementById('age').value;
      const gender = document.getElementById('gender').value;
      const status = document.querySelector('input[name="status"]:checked').value;
      const instagram = document.getElementById('instagram').value.trim().replace("@", "");

      currentUser = {
        id: Date.now(),
        firstName,
        lastName,
        age,
        gender,
        status,
        instagram,
        timestamp: Date.now(),
        isNew: true
      };

      localStorage.setItem(LS_KEY, JSON.stringify(currentUser));
      localStorage.setItem(LS_REGISTERED, "true");

      sendToGoogleForm(currentUser);

      showMainScreen();
      showToast("Qeydiyyat tamamlandı!");
      
      addUser(currentUser);
    }

    async function sendToGoogleForm(user) {
      const fd = new FormData();
      fd.append(ENTRY_FIRSTNAME, user.firstName);
      fd.append(ENTRY_LASTNAME, user.lastName);
      fd.append(ENTRY_AGE, user.age);
      fd.append(ENTRY_GENDER, user.gender);
      fd.append(ENTRY_STATUS, user.status);
      fd.append(ENTRY_INSTAGRAM, user.instagram);

      try {
        await fetch(FORM_ACTION_URL, {
          method: "POST",
          mode: "no-cors",
          body: fd
        });
      } catch (e) {
        console.error("Form göndərmə xətası:", e);
      }
    }

    function addUser(user) {
      let existing = JSON.parse(localStorage.getItem(LS_USERS) || "[]");
      existing.unshift(user);
      localStorage.setItem(LS_USERS, JSON.stringify(existing));
      users = existing;
      renderUsers();
    }

    function loadUsers() {
      const saved = localStorage.getItem(LS_USERS);
      if (saved) {
        users = JSON.parse(saved);
      }
      
      if (currentUser && !users.find(u => u.id === currentUser.id)) {
        users.unshift(currentUser);
      }
      
      renderUsers();
      
      if (navigator.onLine) {
        fetchUsersFromAPI();
      }
    }

    async function fetchUsersFromAPI() {
      try {
        // API çağırışı buraya
      } catch (e) {
        console.log("API əlçatan deyil");
      }
    }

    function renderUsers() {
      const container = document.getElementById('usersList');
      const emptyState = document.getElementById('emptyState');
      const totalCount = document.getElementById('totalCount');
      const todayCount = document.getElementById('todayCount');

      let filtered = users.filter(u => {
        if (currentFilter === 'all') return true;
        return u.gender === currentFilter || u.status === currentFilter;
      });

      totalCount.textContent = users.length;
      const today = users.filter(u => {
        const ts = u.timestamp || 0;
        return (Date.now() - ts) < 86400000;
      }).length;
      todayCount.textContent = today;

      if (filtered.length === 0) {
        container.innerHTML = '';
        emptyState.style.display = 'block';
        return;
      }

      emptyState.style.display = 'none';
      
      container.innerHTML = filtered.map((user, index) => {
        const isNew = user.isNew || (Date.now() - (user.timestamp || 0) < 60000);
        const initials = getInitials(user.firstName, user.lastName);
        const fullName = `${user.firstName} ${user.lastName}`;
        const ageText = user.age ? `${user.age} yaş` : '';
        const genderText = user.gender || '';
        const infoText = [ageText, genderText].filter(Boolean).join(' • ');
        
        return `
          <div class="user-card" style="animation-delay: ${index * 0.1}s">
            ${isNew ? '<div class="new-badge">Yeni</div>' : ''}
            <span class="status-badge">${user.status}</span>
            
            <div class="avatar-circle">
              ${initials}
            </div>
            
            <h3 style="margin: 0 0 4px 0; font-size: 18px; font-weight: 600;">${fullName}</h3>
            <p style="margin: 0 0 12px 0; color: #6b7280; font-size: 13px;">${infoText}</p>
            
            <a href="https://instagram.com/${user.instagram}" target="_blank" class="instagram-btn">
              <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
              @${user.instagram}
            </a>
            
            <div class="time-ago">
              <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
              ${timeAgo(user.timestamp)}
            </div>
          </div>
        `;
      }).join('');

      setTimeout(() => {
        users.forEach(u => u.isNew = false);
        localStorage.setItem(LS_USERS, JSON.stringify(users));
      }, 5000);
    }

    function filterUsers(type, btn) {
      currentFilter = type;
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      btn.classList.add('active');
      renderUsers();
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    init();
  </script>

</body>
</html>
